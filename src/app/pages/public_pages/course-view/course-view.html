<div class="fixed top-0 bg-black w-full h-full opacity-50 z-10"
   [class.hidden]="!loadingContent" [class.block]="loadingContent">

    </div>
 <svg fill="#03D33CFF" viewBox="0 0 24 24" width="50" height="50" [class.hidden]="!loadingContent" [class.fixed]="loadingContent" class="left-[48%] top-[50%] z-11" xmlns="http://www.w3.org/2000/svg"><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/><path d="M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z"><animateTransform attributeName="transform" type="rotate" dur="0.75s" values="0 12 12;360 12 12" repeatCount="indefinite"/></path></svg>
<app-nav-bar></app-nav-bar>
<!-- Student - Course View (Green/White Theme) | Static UI -->
<div class="bg-gray-50 min-h-screen">
    <!-- Hero -->
    <div class="bg-linear-to-b from-green-400 to-gray-700">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-8 sm:py-10">
            <div class="flex justify-end flex-wrap gap-2 mb-3">
                <a routerLink="../../" class="cursor-pointer px-4 py-2 rounded-xl border bg-white hover:bg-green-50">
                    ‚Üê Back
                </a>
            </div>
            <div class="flex flex-col lg:flex-row gap-6 lg:gap-8">
                <!-- Thumbnail -->
                <div class="w-[95%] m-auto lg:m-0 lg:w-105">
                    <div class="rounded-3xl overflow-hidden shadow-lg border border-white/15 bg-white/10">
                        <img src="{{this.course?.thumbnailUrl}}" alt="Course thumbnail"
                            class="w-full h-56 sm:h-64 object-cover" />
                    </div>

                    <!-- Quick badges -->
                    <div class="mt-6 grid grid-cols-2 sm:grid-cols-4 gap-3 text-sm">
                        <div class="rounded-2xl bg-white/10 border border-white/15 p-3">
                            <p class="text-white/80 text-left">Price</p>
                            <p class="font-semibold text-white text-left">{{ this.course?.price === 0 ? 'Free' : this.course?.price + ' TND'}}</p>
                        </div>
                        <div class="rounded-2xl bg-white/10 border border-white/15 p-3">
                            <p class="text-white/80 text-left">Level</p>
                            <p class="font-semibold text-white text-left">{{this.course?.level}}</p>
                        </div>
                        <div class="rounded-2xl bg-white/10 border border-white/15 p-3">
                            <p class="text-white/80 text-left">Category</p>
                            <p class="font-semibold text-white text-left">{{this.course?.category?.title}}</p>
                        </div>
                        <div class="rounded-2xl bg-white/10 border border-white/15 p-3">
                            <p class="text-white/80 text-left">Access</p>
                            <p class="font-semibold text-white text-left">Lifetime</p>
                        </div>
                    </div>
                </div>

                <!-- Main info -->
                <div class="flex-1 text-white">
                    <p class="text-white/80 text-sm">Kawen ‚Ä¢ Course</p>
                    <h1 class="text-3xl sm:text-4xl font-semibold mt-2">{{this.course?.title}}</h1>

                    <!-- Instructor -->
                    <div class="mt-6 flex items-center gap-3">
                        <div
                            class="h-12 w-12 rounded-2xl bg-white/15 border border-white/20 flex items-center justify-center">
                            <span class="text-lg">üë®‚Äçüè´</span>
                        </div>
                        <div>
                            <p class="font-semibold text-white">{{this.course?.instructor?.name}}
                                {{this.course?.instructor?.lastName}}</p>
                            <p class="text-sm text-white/80">Instructor ‚Ä¢ Full Stack Developer</p>
                        </div>
                    </div>

                    <!-- CTAs (mobile) -->
                    <div class="mt-6 flex flex-col sm:flex-row gap-2 lg:hidden">
                        @if( this.sessionService.isLoggedIn()) {
                        <button (click)="enrollCourse()"
                            class="w-full cursor-pointer px-5 py-3 rounded-2xl bg-green-600 text-white font-semibold hover:bg-green-700">
                            Enroll Now
                        </button>}
                        @else {
                        <button routerLink="/Login"
                            class="w-full cursor-pointer px-5 py-3 rounded-2xl bg-green-600 text-white font-semibold hover:bg-green-700">
                            Login to Enroll
                        </button>
                    }
                    </div>
                </div>

                <!-- Sticky Enroll Card (desktop) -->
                <div class="hidden lg:block w-full lg:w-90">
                    <div class="sticky top-6 rounded-3xl bg-white border shadow-lg overflow-hidden">
                        <div class="p-5 border-b">
                            <p class="text-sm text-gray-500">Enroll in this course</p>
                            <div class="mt-2 flex items-end justify-between">
                                <div>
                                    <p class="text-3xl font-semibold text-gray-900">{{ this.course?.price === 0 ? 'Free' : this.course?.price + ' TND' }}</p>
                                    <p class="text-sm text-gray-500">{{ this.course?.price === 0 ? 'Free access' : 'Paid access' }}</p>
                                </div>
                                <span
                                    class="px-3 py-1 rounded-full text-xs font-semibold bg-green-50 text-green-700 border border-green-100">
                                    Available
                                </span>
                            </div>
                        </div>

                        <div class="p-5 space-y-3">
                            @if( this.sessionService.isLoggedIn()) {
                        <button (click)="enrollCourse()"
                            class="w-full cursor-pointer px-5 py-3 rounded-2xl bg-green-600 text-white font-semibold hover:bg-green-700">
                            Enroll Now
                        </button>}
                        @else {
                        <button routerLink="/Login"
                            class="w-full cursor-pointer px-5 py-3 rounded-2xl bg-green-600 text-white font-semibold hover:bg-green-700">
                            Login to Enroll
                        </button>
                    }

                            <div class="rounded-2xl bg-gray-50 border p-4 text-sm text-gray-700">
                                <p class="font-semibold text-gray-900">What you get</p>
                                <ul class="mt-2 space-y-2 text-gray-600">
                                    <li class="flex gap-2"><span>‚úÖ</span><span>{{this.course?.lessonsCount}} structured
                                            lessons</span></li>
                                    <li class="flex gap-2"><span>‚úÖ</span><span>Downloadable resources</span></li>
                                    <li class="flex gap-2"><span>‚úÖ</span><span>Progress tracking</span></li>
                                    <li class="flex gap-2"><span>‚úÖ</span><span>Certificate (coming soon)</span></li>
                                </ul>
                            </div>

                            <div class="text-xs text-gray-500">
                                By enrolling, you agree to the platform rules and course guidelines.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="max-w-6xl mx-auto px-4 sm:px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Tabs-like nav (static) -->
                <div class="flex flex-wrap gap-2">
                    <button class="px-4 py-2 rounded-2xl bg-white border text-gray-900 font-semibold">
                        Overview
                    </button>
                    <button class="px-4 py-2 rounded-2xl bg-gray-50 border text-gray-700 hover:bg-white">
                        Lessons
                    </button>
                    <button class="px-4 py-2 rounded-2xl bg-gray-50 border text-gray-700 hover:bg-white">
                        Requirements
                    </button>
                    <button class="px-4 py-2 rounded-2xl bg-gray-50 border text-gray-700 hover:bg-white">
                        Reviews
                    </button>
                </div>

                <!-- About -->
                <div class="rounded-3xl bg-white border p-5 sm:p-6">
                    <h2 class="text-xl font-semibold text-gray-900">About this course</h2>
                    <p class="text-gray-600 mt-3 leading-relaxed">
                        {{this.course?.description}}
                    </p>

                    <div class="mt-5 grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <div class="rounded-2xl bg-green-50 border border-green-100 p-4">
                            <p class="font-semibold text-gray-900">What you‚Äôll learn</p>
                            <ul class="mt-2 text-sm text-gray-700 space-y-2">
                                <li class="flex gap-2"><span class="text-green-700">‚úî</span><span>Components &
                                        templates</span></li>
                                <li class="flex gap-2"><span class="text-green-700">‚úî</span><span>Routing &
                                        navigation</span></li>
                                <li class="flex gap-2"><span class="text-green-700">‚úî</span><span>Services & dependency
                                        injection</span></li>
                                <li class="flex gap-2"><span class="text-green-700">‚úî</span><span>Firestore + Angular
                                        patterns</span></li>
                            </ul>
                        </div>

                        <div class="rounded-2xl bg-white border p-4">
                            <p class="font-semibold text-gray-900">For who?</p>
                            <ul class="mt-2 text-sm text-gray-700 space-y-2">
                                <li class="flex gap-2"><span>üë§</span><span>Students starting Angular</span></li>
                                <li class="flex gap-2"><span>üë§</span><span>Developers switching from React/Vue</span>
                                </li>
                                <li class="flex gap-2"><span>üë§</span><span>Anyone building real apps with
                                        Firebase</span></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Lessons Preview -->
                <div class="rounded-3xl bg-white border overflow-hidden">
                    <div class="p-5 sm:p-6 border-b flex items-center justify-between">
                        <div>
                            <h2 class="text-xl font-semibold text-gray-900">Lessons preview</h2>
                            <p class="text-sm text-gray-500 mt-1">A quick look at what‚Äôs inside.</p>
                        </div>
                        <button class="px-4 py-2 rounded-2xl border hover:bg-green-50">
                            View all
                        </button>
                    </div>

                    <div class="divide-y">
                        @for(lesson of Limitedlessons;track lesson.uid ; let index = $index) {
                        <div class="p-5 flex items-start justify-between gap-4">
                            <div class="flex items-start gap-3">
                                <div
                                    class="h-10 w-10 rounded-2xl bg-green-50 border border-green-100 flex items-center justify-center font-semibold text-green-700">
                                    {{index + 1}}
                                </div>
                                <div>
                                    <p class="font-semibold text-gray-900">{{lesson.title}}</p>
                                    <p class="text-sm text-gray-500 mt-1">{{lesson.contentType}} ‚Ä¢ {{lesson.duration}}
                                        min</p>
                                </div>
                            </div>
                            <span class="text-xs font-semibold px-3 py-1 rounded-full bg-gray-50 border text-gray-700">
                                {{index===0 ? 'Preview' : 'Locked'}}
                            </span>
                        </div>
                        }
                    </div>
                </div>

                <!-- Requirements -->
                <div class="rounded-3xl bg-white border p-5 sm:p-6">
                    <h2 class="text-xl font-semibold text-gray-900">Requirements</h2>
                    <ul class="mt-3 space-y-2 text-gray-600">
                        <li class="flex gap-2"><span class="text-green-700">‚Ä¢</span><span>Basic JavaScript
                                knowledge</span></li>
                        <li class="flex gap-2"><span class="text-green-700">‚Ä¢</span><span>Node.js installed
                                (recommended)</span></li>
                        <li class="flex gap-2"><span class="text-green-700">‚Ä¢</span><span>Willingness to practice</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Right (non-sticky on mobile) -->
            <div class="lg:hidden rounded-3xl bg-white border shadow-sm overflow-hidden">
                <div class="p-5 border-b">
                    <p class="text-sm text-gray-500">Enroll in this course</p>
                    <div class="mt-2 flex items-end justify-between">
                        <div>
                            <p class="text-3xl font-semibold text-gray-900">{{this.course?.price === 0 ? 'Free' :
                                this.course?.price + ' TND'}}</p>
                            <p class="text-sm text-gray-500">{{this.course?.price === 0 ? 'Free access' : 'Paidaccess'}}</p>
                        </div>
                        <span
                            class="px-3 py-1 rounded-full text-xs font-semibold bg-green-50 text-green-700 border border-green-100">
                            Available
                        </span>
                    </div>
                </div>

                <div class="p-5 space-y-3">
                    @if (this.sessionService.isLoggedIn()) {
                    <button
                        class="w-full px-5 py-3 rounded-2xl bg-green-600 text-white font-semibold hover:bg-green-700">
                        Enroll Now
                    </button>
                    }
                    @else {
                    <button
                        class="w-full px-5 py-3 rounded-2xl bg-green-600 text-white font-semibold hover:bg-green-700">
                        Login to Enroll
                    </button>
                    }

                    <div class="rounded-2xl bg-gray-50 border p-4 text-sm text-gray-700">
                        <p class="font-semibold text-gray-900">What you get</p>
                        <ul class="mt-2 space-y-2 text-gray-600">
                            <li class="flex gap-2"><span>‚úÖ</span><span>{{this.lessons.length}} structured lessons</span>
                            </li>
                            <li class="flex gap-2"><span>‚úÖ</span><span>Downloadable resources</span></li>
                            <li class="flex gap-2"><span>‚úÖ</span><span>Progress tracking</span></li>
                            <li class="flex gap-2"><span>‚úÖ</span><span>Certificate (coming soon)</span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Reviews card (right column desktop uses sticky enroll already, so show extra cards here) -->
            <div class="hidden lg:block space-y-6">
                <div class="rounded-3xl bg-white border p-5">
                    <h3 class="text-lg font-semibold text-gray-900">Course stats</h3>
                    <div class="mt-4 space-y-3 text-sm">
                        <div class="flex items-center justify-between">
                            <p class="text-gray-600">Students enrolled</p>
                            <p class="font-semibold text-gray-900">124</p>
                        </div>
                        <div class="flex items-center justify-between">
                            <p class="text-gray-600">Completion rate</p>
                            <p class="font-semibold text-gray-900">68%</p>
                        </div>
                        <div class="flex items-center justify-between">
                            <p class="text-gray-600">Last updated</p>
                            <p class="font-semibold text-gray-900">Dec 2025</p>
                        </div>
                    </div>
                </div>
                <div class="rounded-3xl bg-white border p-5">
                    <h3 class="text-lg font-semibold text-gray-900">Latest reviews</h3>
                    <div class="mt-4 space-y-4">
                        <div class="rounded-2xl bg-gray-50 border p-4">
                            <div class="flex items-center justify-between">
                                <p class="font-semibold text-gray-900">Sarah M.</p>
                                <span
                                    class="text-xs px-2 py-1 rounded-full bg-green-50 text-green-700 border border-green-100">
                                    Helpful
                                </span>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">
                                Clear explanations and good structure. The examples are practical.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>